---
title   : "Entity Relationship Diagram"
categories : 
    - DB
tags : 
    - DataBase
sidebar:
    title: "DataBase"
    nav : sidebar-posts
---

# ERD(Entity Relationship Diagram)란?  
__ERD는 말로서 되어있는 요구분석사항을 그림으로 그려내여 그 관계를 도출하는 것__  

관계형 데이터 모델은 개체(Entity), 속성(Attribute), 관계(Relationship)로 구성된 ERD로 표현된다.  

![ERD](/assets/img/database/ERD.png)  

##### ERD에서 사용되는 기본적인 기호  
![giho](/assets/img/database/giho.PNG)  

### 개체(Entity)  
사람, 사물, 장소, 개념, 사건과 같이 유형 또는 무형의 정보를 가지고 있는 독립적인 실체를 말하며 독립적인 의미를 지니고 있는 사람 또는 사물 개체의 특성을 나타내는 속성(attribute)에 의해 식별되며 개체끼리 서로 관계를 맺는다.  


### 속성(Attribute)  
데이터의 가장 작은 단위로 엔티티의 특성이나 상태 등을 나타낼 때 사용한다. 하나의 엔티티는 여러 개의 속성으로 나타낼 수 있으며 실제 데이터베이스에서는 칼럼(column)에 해당한다.  
개체(Entity)가 갖는 속성을 의미한다. ERD에서는 속성(Attribute)은 원으로 표현한다. 예를 들어, 위에 예시에서 학생 개체에 달린 원 모양의 학번, 이름, 전화번호가 속성이 된다.  


### 관계(Relation)
개체 타입(Entity Type) 간의 관계를 의미한다.  
위의 예시에서 학생과 과목은 등록이란 관계를 맺고 이때 등록은 관계 타입(Relation Type)이라 하며, 관계 타입 역시 속성을 가질 수 있다.  

#### 유형  
1. 일대일 관계(1:1)  
   - 개체 집합 A의 원소가 개체 집합 B의 원소 1개와 대응하는 관계를 말한다.
   - 어느 개체 쪽에서 상대 개체를 보더라도 단 하나씩 관계를 가지는 것을 말한다.
   - ex) 한 명의 사람은 하나의 주민번호만 가질 수 있다. 한 명의 사람은 주민번호를 여러 개 가질 수 없다

2. 일대다 관계(1:N)  
   - 개체 집합 A의 각 원소는 개체 집합 B의 원소 여러 개와 대응할 수 있고, 개체 집합 B의 각 원소는 개체 집합 A의 원소 1개와 대응하는 관계를 말한다.
   - ex) 회사에서 한 명의 직원은 하나의 직급만 가질 수 있으나, 직급에 해당하는 사람은 여러 명이다.

3. 다대다 관계(N:M)  
   - 개체 집합 A의 각 원소는 개체 집합 B의 원소 여러 개와 대응할 수 있고, 개체 집합 B의 각 원소는 집합 A의 원소 여러 개와 대응할 수 있는 관계를 말한다
   - 즉, 서로가 1:N 관계로 보고 있는 것이다.
   - ex) 사람은 취미를 여러 개 가질 수 있다. 게임, 등산, 운동, 공부 등등 반대로 취미 역시 여러 명의 사람들이 같은 취미를 가질 수 있다.  

#### 대표키와 외래키  

테이블의 각 개체를 식별할 수 있는 __대표 키(PK, Primary Key)__ 가 존재한다.  
대표키는 중복되지 않는 값이다(unique)  

ex) 사람은 한 개의 주민등록증을 가지고 있다. 이 주민등록증에 있는 주민번호는 우리를 식별할 수 있는 번호이기에 대표 키로서의 기능을 할 수 있다. 한 사람이 두 개의 주민등록증을 가질 수 는 없다.  

__테이블간의 관계를 맺을때 대표키를 이용하여 관계를 맺는다__  

회원의 정보를 가지고 있는 테이블과 주문 정보를 가지고 있는 테이블이 있다고 하자  

회원(아이디PK, 비밀번호, 이름, 성별, 주소)  

주문(주문날짜, 상품번호, 상품제목)  

위 처럼 테이블을 만들면 주문 테이블에는 누가 주문을 했는지 알 수 있는 방법이 없다.  
문제를 해결하기 위해서 __주문 테이블에 상품을 주문한 회원을 회원 테이블에서 찾을 수 있는 정보를 추가__ 하면 된다 이 때 사용하는 정보가 무엇일까? 회원 테이블의 대표키를 사용하면 된다. 대표키는 해당 테이블에서 고유한 값을 가진다. 즉, 주문 테이블이 회원 테이블의 대표키 정보만 가지고 있으면 회원 테이블에서 사용자를 찾을 수 있다. 위 예시에서 만든 회원 테이블의 대표키는 아이디 이므로 __주문 테이블에 사용자 테이블의 기본키를 추가하면, 중복된 데이터가 없으면서도 문제 없이 데이터를 저장, 관리 할 수 있다.__  


주문(주문날짜, 상품번호, 상품제목, 아이디FK)  

주문 테이블에서는 회원 아이디 정보를 활용해 회원 테이블의 정보를 찾을 수 있게 되었다 주문 테이블에 존재하는 회원 아이디 정보를 외래키라 한다.  

외래키는 두 개의 테이블을 연결하는 연결다리 역할을 한다.  

N:M 관계 에서는 서로의 PK가 자신의 외래키 컬럼으로 가지고 있으면 된다.  

### Crow's Foot Notation  

관계의 의미나 제약조건 등은 개체 타입들을 연결하는 실선 위에 몇가지 기호를 사용하여 표현하는 표기법이다.  

__사용되는 기호__  

![Crow](/assets/img/database/crow.PNG)  

예시 
![ex](/assets/img/database/ex.PNG)
참조  
- <http://www.dbguide.net/db.db?cmd=view&boardUid=12851&boardConfigUid=9&categoryUid=216&boardIdx=40&boardStep=1>
- <https://victorydntmd.tistory.com/30>