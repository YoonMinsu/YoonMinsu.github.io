---
title   : "트랜잭션"
categories : 
    - DB
tags : 
    - DataBase
sidebar:
    title: "DataBase"
    nav : sidebar-posts
---  

## 트랜잭션(transaction)  

데이터베이스의 상태를 변환시키는 하나의 논리적 기능을 수행하기 위한 작업의 단위 또는 한꺼번에 모두 실행되어야 할 일련의 연산들을 의미한다.  

트랜잭션은 데이터베이스 시스템에서 병행 제어 및 회복 작업 시 처리되는 작업의 논리적 단위이다.  

사용자가 시스템에 대한 서비스 요구 시 시스템이 응답하기 위한 상태 변한 과정의 단위이다.  

하나의 트랜잭션은 COMMIT되거나 ROLLBACK된다.  

데이터베이스 시스템은 각각의 트랜잭션에 대해 원자성(Atomicity), 일관성(Consitency), 독립성(Isolation), 영구성(Durability)을 보장한다.  

이 성질을 첫 글짜를 따서 ACID라고 부른다.  

### 원자성(Atomicity)  
- 트랜잭션의 연산은 데이터베이스에 모두 반영되든지 아니면 전혀 반영되지 않는다.
- 트랜잭션 내의 모든 명령은 완벽히 수행되어야 하며, 모두가 완벽히 수행되지 않고 어느하다라도 오류가 발생하면 트랜잭션 전부가 취소되어야 한다.  

### 일관성(Consitency)   
- 트랜잭션이 그 실행을 성공적으로 완료하면 언제나 일관성 있는 데이터베이스 상태로 변환한다.
- 시스템이 가지고 있는 고정요소는 트랜잭션 수행 전과 트랜잭션 수행 완료 후의 상태가 같아야 한다.  

### 독립성(Isolation)  
- 둘 이상의 트랜잭션이 동시에 별행 실행되는 경우 어느 하나의 트랜잭션 실행 중에 다른 트랜잭션의 연산이 끼어들 수 없다.
- 수행중인 트랜잭션은 완전히 완료될 때까지 다른 트랜잭션에서 수행 결과를 참조할 수 없다.  

### 영구성(Durability)  
- 성공적으로 완료된 트랜잭션의 결과는 시스템이 고장나더라도 영구적으로 반영되어야 한다.  


## 트랜잭션의 연산 및 상태  

**Commit**  

커밋은 모든 작업들을 정상적으로 처리하겠다고 확정하는 명령어로 트랜잭션의 처리과정을 데이터베이스에 모두 반영하기 위해서 변경된 내용을 영구 저장한다.  

Commit 명령어를 수행하게되면 하나의 트랜잭션 과정을 종료하는 것이다.  

**RollBack**  

작업 중 문제가 발생되어서 트랜잭션의 처리과정에서 발생한 변경사항을 취소하는 명령이다.  

롤백 명령어 역시 트랜잭션 과정을 종료하게 되고, 롤백은 트랜잭션으로 인한 하나의 묶음 처리가 시작되기 이전의 상태로 되돌린다.  

트랜잭션은 여러개의 물리적인 작업들이 모여서 이루어지는데 이러한 과정에서 하나의 작업이라도 문제가 발생하게 되면 모든 작업을 취소해야 한다.  

하나의 논리적인 작업 단위(트랜잭션)로 구성해 놓으면 해당 트랜잭션만 취소하면 된다.  


트랜잭션의 상태에는 5가지가 있다.  

- 활동(Active): 트랜잭션이 실행중인 상태
- 실패(Failed): 트랜잭션 실행에 오류가 발생하여 중단된 상태
- 철회(Aborted): 트랜잭션이 비성장적으로 종료되어 RollBack 연산을 수행한 상태
- 부분 안료(Partially committed) 트랜잭션의 마지막 연산까지 실행했자만, Commit 연산이 실행되기 직전의 상태
- 완료(Commited): 트랜잭션이 성공적으로 종료되어 Commit 연산을 실행한 후의 상태  